define(["jquery","routing","bootstrap"],function(o,r){var e={load:function(a){var t,e=a.data("summary");if("object"==typeof e)t=r.generate(e.route,e.parameters);else{if("string"!=typeof e)throw"Unexpected summary config.";t=e}e=o.ajax({url:t,dataType:"html"});e.done(function(t){a.popover({content:t,template:'<div class="popover summary" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',container:"body",html:!0,placement:"auto",trigger:"hover",sanitize:!1}),a.is(":hover")&&a.popover("show")}),a.data("summary-xhr",e),a.removeData("summary-timeout")},init:function(){"ontouchstart"in window||o(document).on("mouseenter","[data-summary]",function(t){t.stopPropagation(),t.preventDefault();var a=o(this);a.data("summary-xhr")||a.data("summary-timeout")||(t=setTimeout(function(){e.load(a)},300),a.data("summary-timeout",t))}).on("mouseleave","[data-summary]",function(){var t,a=o(this);a.data("summary-xhr")||(t=a.data("summary-timeout"),clearTimeout(t),a.removeData("summary-timeout"))})}};return e});