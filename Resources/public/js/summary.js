define(["jquery","routing","bootstrap"],function(a,b){var c={};return c.load=function(c){var d,e=c.data("summary");if("object"==typeof e)d=b.generate(e.route,e.parameters);else{if("string"!=typeof e)throw"Unexpected summary config.";d=e}var f=a.ajax({url:d,dataType:"html"});f.done(function(a){c.popover({content:a,template:'<div class="popover summary" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',container:"body",html:!0,placement:"auto",trigger:"hover"}),c.is(":hover")&&c.popover("show")}),c.data("summary-xhr",f),c.removeData("summary-timeout")},c.init=function(){"ontouchstart"in window||a(document).on("mouseenter","[data-summary]",function(b){b.stopPropagation(),b.preventDefault();var d=a(this);if(!d.data("summary-xhr")&&!d.data("summary-timeout")){var e=setTimeout(function(){c.load(d)},300);d.data("summary-timeout",e)}}).on("mouseleave","[data-summary]",function(){var b=a(this);if(!b.data("summary-xhr")){var c=b.data("summary-timeout");clearTimeout(c),b.removeData("summary-timeout")}})},c});